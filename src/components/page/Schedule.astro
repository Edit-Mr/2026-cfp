---
const { schedule } = Astro.props;
---

<div class="schedule">
	<h2>重要時程</h2>
	<div class="divider"></div>
	{
		schedule.map((item: { date: Date; event: string }) => (
			<div class="event" data-date={item.date.toISOString()}>
				<div class="event-col">{item.date.toLocaleDateString("zh-Hant")}</div>
				<div class="event-col">{item.event}</div>
			</div>
		))
	}
</div>

<style>
	.schedule {
		text-align: center;
	}

	.divider {
		height: 0.25rem;
		width: 100%;
		background: #ffffff;
		margin-top: 0.5rem;
		margin-bottom: 0.5rem;
	}

	.event {
		display: flex;
		border-radius: 1rem;
		background: #ffffff;
		color: #000000;
		font-size: larger;
		width: 100%;
		align-content: center;
		height: 3rem;
		margin-top: 1rem;
		align-items: center;
	}

	.event-before {
		background: #8d5657;
		color: #ffffff;
	}

	.event-col {
		flex: 1;
	}
</style>

<script>
	const diffDate = (a: Date) => a.getTime() - new Date().getTime();
	document.querySelectorAll(".event").forEach(el => {
		const date = new Date(el.getAttribute("data-date") || "");
		if (diffDate(date) < 0) {
			el.classList.add("event-before");
		}
	});
</script>
